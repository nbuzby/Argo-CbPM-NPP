% Pacific Northwest Color Palette builder function
function out = pnw_palette(name, n, type)

% Create the color palettes
pnw_palettes = containers.Map(...
    {'Starfish', 'Shuksan', 'Bay', 'Winter', 'Lake', 'Sunset', 'Shuksan2', 'Cascades', 'Sailboat', 'Moth', 'Spring', 'Mushroom', 'Sunset2', 'Anemone'}, ...
    { ...
        {{'#24492e', '#015b58', '#2c6184', '#59629b', '#89689d', '#ba7999', '#e69b99'}, [7,4,5,3,1,6,2]}; ...
        {{'#33271e', '#74677e', '#ac8eab', '#d7b1c5', '#ebbdc8', '#f2cec7', '#f8e3d1', '#fefbe9'}, [7,2,4,1,6,3,5,8]}; ...
        {{'#00496f', '#0f85a0', '#edd746', '#ed8b00', '#dd4124'}, [4,1,3,5,2]}; ...
        {{'#2d2926', '#33454e', '#537380', '#81a9ad', '#ececec'}, [1,4,5,2,3]}; ...
        {{'#362904', '#54450f', '#45681e', '#4a9152', '#64a8a8', '#85b6ce', '#cde5f9', '#eef3ff'}, [4,8,7,2,6,1,3,5]}; ...
        {{'#41476b', '#675478', '#9e6374', '#c67b6f', '#de9b71', '#efbc82', '#fbdfa2'}, [3,5,1,7,4,6,2]}; ...
        {{'#5d74a5', '#b0cbe7', '#fef7c7', '#eba07e', '#a8554e'}, [2,4,1,5,3]}; ...
        {{'#2d4030','#516823','#dec000','#e2e260','#677e8e','#88a2b9'}, [4,1,5,2,6,3]}; ...
        {{'#6e7cb9', '#7bbcd5', '#d0e2af', '#f5db99', '#e89c81', '#d2848d'}, [1,4,6,2,5,3]}; ...
        {{'#4a3a3b', '#984136', '#c26a7a', '#ecc0a1', '#f0f0e4'}, [4,1,2,3,5]}; ...
        {{'#d8aedd', '#bf9bdd', '#cb74ad', '#e69e9c', '#ffc3a3', '#fbe4c6'}, [1,5,2,4,3,6]}; ...
        {{'#4f412b', '#865a3c', '#ba783e', '#e69c4c', '#fbcc74', '#fffbda'}, [6,1,4,2,3,5]}; ...
        {{'#1d457f', '#61599d', '#c36377', '#eb7f54', '#f2af4a'}, [5,1,2,4,3]}; ...
        {{'#009474' ,'#11c2b5' ,'#72e1e1', '#f1f4ee' ,'#efddcf', '#dcbe9b' ,'#b0986c'}, [3, 5, 1 ,7, 2, 6, 4]} ...
    });

%get function going
    pal = pnw_palettes(name);
    if nargin < 2
        n = length(pal{1});
    end
    if nargin < 3
        if n > length(pal{1})
            type = 'continuous';
        else
            type = 'discrete';
        end
    end

    if strcmp(type, 'discrete') && n > length(pal{1})
        error('Number of requested colors greater than what discrete palette can offer, use as continuous instead.');
    end

    switch type
        case 'continuous'
            out = cellfun(@(x) sscanf(x, '#%2x%2x%2x') / 255, pal{1}, 'UniformOutput', false);
            out = cell2mat(out)';
            out = interp1(linspace(0, 1, size(out, 1)), out, linspace(0, 1, n));
        case 'discrete'
            idx = ismember(pal{2}, 1:n);
            out = cellfun(@(x) sscanf(x, '#%2x%2x%2x') / 255, pal{1}(idx), 'UniformOutput', false);
            out = cell2mat(out)';
    end
end
